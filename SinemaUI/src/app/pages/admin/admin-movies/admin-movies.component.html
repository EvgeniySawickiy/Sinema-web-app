<div class="admin-movies">
  <form [formGroup]="movieForm">
    <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
    <input type="text" formControlName="title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞" />
    <div *ngIf="movieForm.get('title')?.invalid && movieForm.get('title')?.touched" class="error">
      –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–º–∏–Ω. 2 —Å–∏–º–≤–æ–ª–∞)
    </div>

    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
    <textarea formControlName="description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
    <div *ngIf="movieForm.get('description')?.invalid && movieForm.get('description')?.touched" class="error">
      –û–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–º–∏–Ω. 10 —Å–∏–º–≤–æ–ª–æ–≤)
    </div>

    <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã):</label>
    <input type="number" formControlName="durationInMinutes" />
    <div *ngIf="movieForm.get('durationInMinutes')?.invalid && movieForm.get('durationInMinutes')?.touched" class="error">
      –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1 –º–∏–Ω—É—Ç—ã
    </div>

    <label>–ñ–∞–Ω—Ä—ã:</label>
    <select multiple formControlName="genreIds">
      <option *ngFor="let genre of genres" [value]="genre.id">{{ genre.name }}</option>
    </select>
    <div *ngIf="movieForm.get('genreIds')?.invalid && movieForm.get('genreIds')?.touched" class="error">
      –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∂–∞–Ω—Ä
    </div>

    <label>–†–µ–π—Ç–∏–Ω–≥:</label>
    <input type="number" formControlName="rating" />
    <div *ngIf="movieForm.get('rating')?.invalid && movieForm.get('rating')?.touched" class="error">
      –†–µ–π—Ç–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ 10
    </div>

    <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
    <input type="text" formControlName="imageUrl" placeholder="URL –ø–æ—Å—Ç–µ—Ä–∞" />
    <div *ngIf="movieForm.get('imageUrl')?.invalid && movieForm.get('imageUrl')?.touched" class="error">
      –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL
    </div>

    <label>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç—Ä–µ–π–ª–µ—Ä:</label>
    <input type="text" formControlName="trailerUrl" placeholder="URL —Ç—Ä–µ–π–ª–µ—Ä–∞" />
    <div *ngIf="movieForm.get('trailerUrl')?.invalid && movieForm.get('trailerUrl')?.touched" class="error">
      –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL
    </div>

    <div class="form-buttons">
      <button *ngIf="!isEditing" (click)="addMovie()" [disabled]="movieForm.invalid">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</button>
      <button *ngIf="isEditing" (click)="updateMovie()" [disabled]="movieForm.invalid">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
      <button *ngIf="isEditing" (click)="cancelEdit()">‚ùå –û—Ç–º–µ–Ω–∞</button>
    </div>
  </form>

  <div class="movies-list">
    <h2>üìú –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤</h2>
    <div *ngIf="movies.length === 0" class="no-movies">–§–∏–ª—å–º–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>

    <div *ngFor="let movie of movies" class="movie-card">
      <img [src]="movie.imageUrl || 'assets/imges/default-movie-portrait.jpg'" alt="{{ movie.title }}" />
      <div class="movie-info">
        <h3>{{ movie.title }}</h3>
        <p><strong>–ñ–∞–Ω—Ä—ã:</strong> {{ getGenreNames(movie.genreIds) }}</p>
        <p><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> {{ movie.rating }}/10</p>
        <div class="buttons">
          <button class="edit-btn" (click)="editMovie(movie)">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button class="delete-btn" (click)="deleteMovie(movie.id)">üóë –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>
</div>
