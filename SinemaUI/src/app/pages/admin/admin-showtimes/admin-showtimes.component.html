<div class="admin-showtimes">
  <h2>üéü –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∞–Ω—Å–∞–º–∏</h2>

  <form #showtimeFormElement [formGroup]="showtimeForm">
    <label>–§–∏–ª—å–º:</label>
    <select formControlName="movieId">
      <option *ngFor="let movie of movies" [value]="movie.id">{{ movie.title }}</option>
    </select>

    <label>–ö–∏–Ω–æ–∑–∞–ª:</label>
    <select formControlName="hallId">
      <option *ngFor="let hall of halls" [value]="hall.id">{{ hall.name }}</option>
    </select>

    <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</label>
    <input type="datetime-local" formControlName="startTime" />

    <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</label>
    <input type="number" formControlName="ticketPrice" />

    <div class="form-buttons">
      <button *ngIf="!isEditing" (click)="addShowtime()" [disabled]="showtimeForm.invalid">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∞–Ω—Å</button>
      <button *ngIf="isEditing" (click)="updateShowtime()" [disabled]="showtimeForm.invalid">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button *ngIf="isEditing" (click)="cancelEdit()">‚ùå –û—Ç–º–µ–Ω–∞</button>
    </div>
  </form>

  <div class="showtimes-list">
    <h2>üìÖ –°–ø–∏—Å–æ–∫ —Å–µ–∞–Ω—Å–æ–≤</h2>
    <div *ngIf="groupedShowtimes.length === 0" class="no-showtimes">–°–µ–∞–Ω—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>

    <div *ngFor="let group of groupedShowtimes" class="movie-group">
      <h3 class="movie-title">üé¨ {{ group.movie.title }}</h3>

      <div class="showtime-grid">
        <div *ngFor="let showtime of group.sessions" class="showtime-card">
          <p><strong>–ö–∏–Ω–æ–∑–∞–ª:</strong> {{ getHallName(showtime.hallId) }}</p>
          <p><strong>–î–∞—Ç–∞:</strong> {{ showtime.startTime | date: 'dd MMMM yyyy, HH:mm' }}</p>
          <p><strong>–¶–µ–Ω–∞:</strong> {{ showtime.ticketPrice }} —Ä—É–±.</p>

          <div class="buttons">
            <button class="edit-btn" (click)="editShowtime(showtime)">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="delete-btn" (click)="deleteShowtime(showtime.id)">üóë –£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
